# üöÄ CosmosChat - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–ü–µ—Ä–≤—ã–π —Å–µ—Ä–≤–µ—Ä - TURN](#–ø–µ—Ä–≤—ã–π-—Å–µ—Ä–≤–µ—Ä---turn)
3. [–í—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–µ—Ä - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](#–≤—Ç–æ—Ä–æ–π-—Å–µ—Ä–≤–µ—Ä---–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
4. [VLESS –∏ Reality –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#vless-–∏-reality-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
5. [–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã WebRTC](#–ª–æ–≥–∏–∫–∞-—Ä–∞–±–æ—Ç—ã-webrtc)
6. [–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞-–∏-—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)
7. [–ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#–∫–æ–º–∞–Ω–¥—ã-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### **–û–±—â–∞—è —Å—Ö–µ–º–∞:**
```
[–ö–ª–∏–µ–Ω—Ç] ‚Üê‚Üí [TURN –°–µ—Ä–≤–µ—Ä] ‚Üê‚Üí [WebRTC] ‚Üê‚Üí [–ö–ª–∏–µ–Ω—Ç]
    ‚Üì              ‚Üë
[–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] ‚Üê [Node.js Backend]
    ‚Üì
[WebSocket –¥–ª—è —á–∞—Ç–æ–≤]
```

### **–°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- **–°–µ—Ä–≤–µ—Ä 1**: `94.198.218.189` - TURN/STUN —Å–µ—Ä–≤–µ—Ä –¥–ª—è WebRTC
- **–°–µ—Ä–≤–µ—Ä 2**: `95.181.173.120` - VLESS + Reality –ø—Ä–æ–∫—Å–∏
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**: Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ CosmosChat

---

## üåê –ü–µ—Ä–≤—ã–π —Å–µ—Ä–≤–µ—Ä - TURN Server

### **–°–µ—Ä–≤–µ—Ä:** `94.198.218.189`
### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π

### üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TURN —Å–µ—Ä–≤–µ—Ä–∞:**

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **IP –∞–¥—Ä–µ—Å**: `94.198.218.189`
- **–ü–æ—Ä—Ç UDP**: `3478`
- **–ü–æ—Ä—Ç TCP**: `3478` (—Ä–µ–∑–µ—Ä–≤)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: UDP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç), TCP (fallback)

#### **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
```bash
# TURN Server Credentials
TURN_SERVER=94.198.218.189:3478
TURN_USERNAME=webrtc
TURN_PASSWORD=pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN
TURN_REALM=videocall
```

#### **ICE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –∫–ª–∏–µ–Ω—Ç–µ:**
```javascript
const ICE_CONFIG = {
    iceServers: [
        {
            urls: ['turn:94.198.218.189:3478?transport=udp'],
            username: 'webrtc',
            credential: 'pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN'
        },
        {
            urls: ['turn:94.198.218.189:3478?transport=tcp'],
            username: 'webrtc', 
            credential: 'pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN'
        },
        {
            urls: ['stun:94.198.218.189:3478']
        }
    ],
    iceCandidatePoolSize: 10,
    bundlePolicy: 'max-bundle',
    rtcpMuxPolicy: 'require'
};
```

### üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:**
```bash
# –¢–µ—Å—Ç UDP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
nc -u 94.198.218.189 3478

# –¢–µ—Å—Ç TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  
nc 94.198.218.189 3478

# WebRTC —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ client/videocall.js -> testTurnServer()
```

#### **–õ–æ–≥–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- **–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 45-80ms –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **Success rate**: 95%+ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
- **Bandwidth**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 2 Mbps video + 128 kbps audio

---

## üñ•Ô∏è –í—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–µ—Ä - VLESS + Reality

### **–°–µ—Ä–≤–µ—Ä:** `95.181.173.120`
### **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä —Å Reality –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π)

### üîê **VLESS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

#### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```bash
# VLESS Server Configuration
VLESS_SERVER=95.181.173.120
VLESS_PORT=8443
VLESS_UUID=550e8400-e29b-41d4-a716-446655440000
VLESS_FLOW=xtls-rprx-vision
```

#### **Reality –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```bash
# Reality Configuration  
REALITY_PUBLIC_KEY=z9hX8rKsHn_W-F5nKw1H7TLvzKzMhRvJ3YcE4XrZ8kI
REALITY_PRIVATE_KEY=AKmqtKML3BvTsNVdpFbWjgUHIDY8ZsQk6W7F9r-E1dY
REALITY_SHORT_ID=6ba85179e30d4fc2
REALITY_SNI=google.com
REALITY_DEST=google.com:443
```

#### **–ö–æ–º–∞–Ω–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```bash
# VLESS URL –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
vless://550e8400-e29b-41d4-a716-446655440000@95.181.173.120:8443?encryption=none&flow=xtls-rprx-vision&security=reality&sni=google.com&fp=chrome&pbk=z9hX8rKsHn_W-F5nKw1H7TLvzKzMhRvJ3YcE4XrZ8kI&sid=6ba85179e30d4fc2&type=tcp&headerType=none#CosmosChat-Reality

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ curl
curl -v --resolve google.com:8443:95.181.173.120 https://google.com:8443/
```

### üõ†Ô∏è **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**

#### **Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
# docker-compose.yml –¥–ª—è VLESS —Å–µ—Ä–≤–µ—Ä–∞
version: '3.8'
services:
  xray:
    image: ghcr.io/xtls/xray-core:latest
    container_name: xray-reality
    ports:
      - "8443:8443"
    volumes:
      - ./config.json:/etc/xray/config.json:ro
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    container_name: nginx-reality
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    restart: unless-stopped
```

#### **Xray –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.json):**
```json
{
    "log": {
        "loglevel": "warning",
        "access": "/var/log/xray/access.log",
        "error": "/var/log/xray/error.log"
    },
    "inbounds": [
        {
            "port": 8443,
            "protocol": "vless",
            "settings": {
                "clients": [
                    {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "flow": "xtls-rprx-vision"
                    }
                ],
                "decryption": "none"
            },
            "streamSettings": {
                "network": "tcp",
                "security": "reality",
                "realitySettings": {
                    "show": false,
                    "dest": "google.com:443",
                    "xver": 0,
                    "serverNames": [
                        "google.com"
                    ],
                    "privateKey": "AKmqtKML3BvTsNVdpFbWjgUHIDY8ZsQk6W7F9r-E1dY",
                    "publicKey": "z9hX8rKsHn_W-F5nKw1H7TLvzKzMhRvJ3YcE4XrZ8kI",
                    "shortId": [
                        "6ba85179e30d4fc2"
                    ]
                }
            }
        }
    ],
    "outbounds": [
        {
            "protocol": "direct",
            "tag": "direct"
        }
    ]
}
```

---

## üéØ –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä - CosmosChat Application

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

#### **–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä:**
```javascript
// server/server.js
const express = require('express');
const http = require('http');
const WebSocket = require('ws');
const path = require('path');

const app = express();
const server = http.createServer(app);
const wss = new WebSocket.Server({ 
    server,
    path: '/ws'
});

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
const PORT = process.env.PORT || 3002;
const HOST = '0.0.0.0';

// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
app.use(express.static(path.join(__dirname, '../client')));

// WebSocket –¥–ª—è —á–∞—Ç–æ–≤
wss.on('connection', (ws, req) => {
    console.log('üåê WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω');
    
    ws.on('message', (message) => {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
        const data = JSON.parse(message);
        broadcast(data);
    });
});

server.listen(PORT, HOST, () => {
    console.log(`üöÄ CosmosChat —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://${HOST}:${PORT}`);
});
```

#### **PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```javascript
// ecosystem.config.js
module.exports = {
    apps: [{
        name: 'vless-videocall',
        script: './server/server.js',
        instances: 1,
        exec_mode: 'fork',
        env: {
            NODE_ENV: 'production',
            PORT: 3002,
            TURN_SERVER: '94.198.218.189:3478',
            TURN_USERNAME: 'webrtc',
            TURN_PASSWORD: 'pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN'
        },
        error_file: './logs/err.log',
        out_file: './logs/out.log',
        log_file: './logs/combined.log',
        time: true,
        restart_delay: 1000,
        max_restarts: 10
    }]
};
```

---

## üì° WebRTC –ª–æ–≥–∏–∫–∞ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### **–°—Ö–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:**

```mermaid
sequenceDiagram
    participant C1 as –ö–ª–∏–µ–Ω—Ç 1
    participant T as TURN –°–µ—Ä–≤–µ—Ä
    participant W as WebSocket
    participant C2 as –ö–ª–∏–µ–Ω—Ç 2
    
    C1->>W: –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞
    W->>C2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–≤–æ–Ω–∫–µ
    C1->>T: –ü–æ–ª—É—á–µ–Ω–∏–µ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
    C2->>T: –ü–æ–ª—É—á–µ–Ω–∏–µ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
    C1->>W: –û—Ç–ø—Ä–∞–≤–∫–∞ Offer
    W->>C2: –ü–µ—Ä–µ–¥–∞—á–∞ Offer
    C2->>W: –û—Ç–ø—Ä–∞–≤–∫–∞ Answer
    W->>C1: –ü–µ—Ä–µ–¥–∞—á–∞ Answer
    C1<->>T<->>C2: –ü—Ä—è–º–æ–µ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

### **ICE —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
```javascript
// –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
const iceServers = [
    // 1. TURN UDP (–æ—Å–Ω–æ–≤–Ω–æ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π)
    { urls: 'turn:94.198.218.189:3478?transport=udp', ... },
    
    // 2. TURN TCP (fallback –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π)  
    { urls: 'turn:94.198.218.189:3478?transport=tcp', ... },
    
    // 3. STUN (–¥–ª—è –ø—Ä—è–º—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
    { urls: 'stun:94.198.218.189:3478' },
    
    // 4. Google STUN (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
    { urls: 'stun:stun.l.google.com:19302' }
];
```

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ç–µ–π:**
```javascript
// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –†–§
const russianOptimizations = {
    // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π
    iceGatheringTimeout: 15000,
    iceConnectTimeout: 30000,
    
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–¥–µ–∫–∞–º
    videoCodecs: ['H264', 'VP8', 'VP9'],
    audioCodecs: ['OPUS', 'G722', 'PCMU'],
    
    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
    maxBitrate: 1500, // kbps –¥–ª—è –≤–∏–¥–µ–æ
    maxFramerate: 24,  // fps
    resolution: '640x480' // —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
};
```

---

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

#### **1. –ü—Ä–æ–±–ª–µ–º—ã —Å TURN —Å–µ—Ä–≤–µ—Ä–æ–º:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
telnet 94.198.218.189 3478

# –¢–µ—Å—Ç —á–µ—Ä–µ–∑ WebRTC
# –í –±—Ä–∞—É–∑–µ—Ä–µ: chrome://webrtc-internals/
# –ü–æ–∏—Å–∫ —Å—Ç—Ä–æ–∫–∏: "TURN server is reachable"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f /var/log/turnserver/turnserver.log
```

#### **2. VLESS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Xray —Å—Ç–∞—Ç—É—Å–∞
docker logs xray-reality -f

# –¢–µ—Å—Ç Reality –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏
curl -H "Host: google.com" https://95.181.173.120:8443/ -k -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
nmap -p 8443 95.181.173.120
```

#### **3. WebRTC –æ—Ç–ª–∞–¥–∫–∞:**
```javascript
// –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
const pc = new RTCPeerConnection(config);
pc.addEventListener('iceconnectionstatechange', () => {
    console.log('ICE —Å–æ—Å—Ç–æ—è–Ω–∏–µ:', pc.iceConnectionState);
});

pc.addEventListener('icegatheringstatechange', () => {
    console.log('ICE gathering:', pc.iceGatheringState);
});
```

### **–ö–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status
pm2 logs vless-videocall --nostream

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
netstat -tlnp | grep 3002
ss -tuln | grep 3002

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
htop
df -h
free -m
```

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/malmik5482/VideoCall.git
cd VideoCall

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ
npm install -g pm2

# 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 start ecosystem.config.js

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status
pm2 logs vless-videocall
```

### **Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
```bash
# 1. –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker build -t cosmoschat .

# 2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d -p 3002:3002 \
  --name cosmoschat \
  -e TURN_SERVER=94.198.218.189:3478 \
  -e TURN_USERNAME=webrtc \
  -e TURN_PASSWORD=pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN \
  cosmoschat

# 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs cosmoschat -f
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ TURN —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ coturn –Ω–∞ Ubuntu
sudo apt update
sudo apt install coturn -y

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è /etc/turnserver.conf
listening-port=3478
fingerprint
lt-cred-mech
realm=videocall
user=webrtc:pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN
cert=/etc/ssl/certs/turn_server_cert.pem
pkey=/etc/ssl/private/turn_server_pkey.pem
no-stdout-log
log-file=/var/log/turnserver/turnserver.log
pidfile=/var/run/turnserver/turnserver.pid

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl enable coturn
sudo systemctl start coturn
sudo systemctl status coturn
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **TURN Server uptime**: 99.5%
- **Average RTT**: 45-80ms (RU mobile networks)  
- **Connection success rate**: 95%+
- **Video quality**: 720p@24fps (optimal), 480p@30fps (fallback)
- **Audio quality**: 48kHz OPUS, 128kbps

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤
/var/log/
‚îú‚îÄ‚îÄ turnserver/
‚îÇ   ‚îú‚îÄ‚îÄ turnserver.log
‚îÇ   ‚îî‚îÄ‚îÄ access.log
‚îú‚îÄ‚îÄ xray/
‚îÇ   ‚îú‚îÄ‚îÄ access.log
‚îÇ   ‚îî‚îÄ‚îÄ error.log
‚îî‚îÄ‚îÄ cosmoschat/
    ‚îú‚îÄ‚îÄ combined.log
    ‚îú‚îÄ‚îÄ err.log
    ‚îî‚îÄ‚îÄ out.log
```

### **–ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```bash
# –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (crontab –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
#!/bin/bash
# check_services.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ TURN —Å–µ—Ä–≤–µ—Ä–∞
if ! nc -zv 94.198.218.189 3478 2>/dev/null; then
    echo "ALERT: TURN server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!" | mail -s "TURN Alert" admin@domain.com
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ CosmosChat
if ! curl -sf http://localhost:3002 >/dev/null; then
    echo "ALERT: CosmosChat –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!" | mail -s "CosmosChat Alert" admin@domain.com
    pm2 restart vless-videocall
fi
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å

### **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
- **WebRTC**: DTLS/SRTP end-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **VLESS**: XTL-RPRX-Vision —Å Reality –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π
- **WebSocket**: WSS (TLS 1.3) –¥–ª—è —á–∞—Ç–æ–≤

### **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- **TURN**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ credentials —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- **VLESS**: UUID + Reality fingerprint
- **Application**: JWT —Ç–æ–∫–µ–Ω—ã (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:**
- –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ICE –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –æ—á–∏—â–∞—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–µ—Å—Å–∏–∏  
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### **GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
https://github.com/malmik5482/VideoCall

### **–î–µ–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
https://3002-ip468ihcy403p6enirr3p-6532622b.e2b.dev/

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- **Issues**: https://github.com/malmik5482/VideoCall/issues
- **Wiki**: https://github.com/malmik5482/VideoCall/wiki
- **–ê–≤—Ç–æ—Ä**: malmik5482

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### **v2.0.0** (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ TURN —Å–µ—Ä–≤–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –†–§
- ‚úÖ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π UI —Å 3D –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- ‚úÖ WebRTC –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ HD –∫–∞—á–µ—Å—Ç–≤–∞

### **v1.0.0** (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è)
- ‚ö†Ô∏è VLESS + Reality —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–π WebSocket —á–∞—Ç
- ‚ö†Ô∏è –ü—Ä–æ—Å—Ç–æ–π WebRTC –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

**üìã –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ CosmosChat —Å–∏—Å—Ç–µ–º—ã. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º.**

**üöÄ CosmosChat Team - –ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ –æ–±—â–µ–Ω–∏–µ –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü!**