# ๐ท๐บ VideoCall Pro - Russian Optimized Edition + Agora Integration

ะััะพะบะพะบะฐัะตััะฒะตะฝะฝัะต ะฒะธะดะตะพะทะฒะพะฝะบะธ 1โะบโ1, ัะฟะตัะธะฐะปัะฝะพ ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะต ะดะปั ัะพััะธะนัะบะธั ัะตัะตะน. ะขะตะฟะตัั ั ะฟะพะดะดะตัะถะบะพะน **Agora SDK** ะดะปั ะผะฐะบัะธะผะฐะปัะฝะพะณะพ ะบะฐัะตััะฒะฐ ะฝะฐ ะผะพะฑะธะปัะฝัั ัะตััั!

![Russian Flag](https://img.shields.io/badge/๐ท๐บ-Optimized%20for%20Russia-blue) ![WebRTC](https://img.shields.io/badge/WebRTC-Enabled-green) ![Agora](https://img.shields.io/badge/Agora-Integrated-purple) ![TURN Server](https://img.shields.io/badge/TURN-94.198.218.189-orange)

## ๐ฏ ะะฒะต ะฒะตััะธะธ ะฟัะธะปะพะถะตะฝะธั

### ๐ **Agora Edition (ะะตะบะพะผะตะฝะดัะตััั ะดะปั ะผะพะฑะธะปัะฝัั)**
- **URL:** `/agora`
- **ะกะตัะฒะตัั ะฒ ะะพัะบะฒะต** - ะฝะธะทะบะฐั ะทะฐะดะตัะถะบะฐ
- **SFU ะฐััะธัะตะบัััะฐ** - ััะฐะฑะธะปัะฝะตะต P2P
- **ะะฒัะพะผะฐัะธัะตัะบะฐั ะพะฟัะธะผะธะทะฐัะธั** ะฑะธััะตะนัะฐ
- **ะะพะดะดะตัะถะบะฐ ัะพััะธะนัะบะธั ะผะพะฑะธะปัะฝัั ัะตัะตะน:** ะะขะก, ะะธะปะฐะนะฝ, ะะตะณะฐะคะพะฝ, ะขะตะปะต2

### ๐ก **WebRTC Edition (ะะปะฐััะธัะตัะบะธะน P2P)**
- **URL:** `/` (ะณะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ)
- **ะกะพะฑััะฒะตะฝะฝัะน TURN ัะตัะฒะตั** ะฝะฐ `94.198.218.189:3478`
- **14 ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัั ICE ัะตัะฒะตัะพะฒ**
- **ะััะผะพะต ัะพะตะดะธะฝะตะฝะธะต** ะผะตะถะดั ััััะพะนััะฒะฐะผะธ

---

## โจ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

### ๐ฅ Agora Integration
- ๐ **ะกะตัะฒะตัั ะฒ ะะพััะธะธ** ะดะปั ะผะธะฝะธะผะฐะปัะฝะพะน ะทะฐะดะตัะถะบะธ
- ๐ฑ **ะะพะฑะธะปัะฝะฐั ะพะฟัะธะผะธะทะฐัะธั** ะดะปั 2G/3G/4G/5G
- โก **ะะดะฐะฟัะธะฒะฝัะน ะฑะธััะตะนั** ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ๐ **ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต** ัะธะฟะฐ ัะตัะธ ะธ ะพะฟะตัะฐัะพัะฐ
- ๐ **ะะตะทะพะฟะฐัะฝัะต ัะพะบะตะฝั** ั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะณะตะฝะตัะฐัะธะตะน

### ๐ก WebRTC Features
- ๐ **ะกะพะฑััะฒะตะฝะฝัะน TURN ัะตัะฒะตั** ะฝะฐ `94.198.218.189:3478`
- ๐ **14 ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัั ICE ัะตัะฒะตัะพะฒ** ะดะปั ะะพััะธะธ
- ๐ฑ **ะะดะฐะฟัะธะฒะฝะพะต ะบะฐัะตััะฒะพ** ะพั 4K ะดะพ ะผะพะฑะธะปัะฝะพะณะพ
- ๐ **ะะธะฐะณะฝะพััะธะบะฐ ัะตัะธ** ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ๐ **ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต** ัะพะตะดะธะฝะตะฝะธั
- ๐ **ะะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ** ะธ ะผะตััะธะบะธ

---

## ๐ ะัััััะน ััะฐัั

### ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
```bash
npm install
```

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ
```bash
npm start
# Agora ะฒะตััะธั: http://localhost:3001/agora
# WebRTC ะฒะตััะธั: http://localhost:3001/
```

### ๐ ะะฐัััะพะนะบะฐ Agora (ะดะปั Agora ะฒะตััะธะธ)

1. **ะะฐัะตะณะธัััะธััะนัะตัั ะฝะฐ** https://console.agora.io
2. **ะกะพะทะดะฐะนัะต ะฟัะพะตะบั** ั Video Calling
3. **ะกะบะพะฟะธััะนัะต App ID** ะธะท ะฝะฐัััะพะตะบ ะฟัะพะตะบัะฐ
4. **ะัะบัะพะนัะต** `/agora` ัััะฐะฝะธัั ะฟัะธะปะพะถะตะฝะธั
5. **ะััะฐะฒััะต App ID** ะฒ ะฟะพะปะต ะฝะฐัััะพะตะบ
6. **ะะฐะถะผะธัะต "ะกะพััะฐะฝะธัั ะฝะฐัััะพะนะบะธ"**

### ๐ฑ ะขะตััะธัะพะฒะฐะฝะธะต ะฒะธะดะตะพะทะฒะพะฝะบะพะฒ

**Agora ะฒะตััะธั (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ะผะพะฑะธะปัะฝัั):**
1. ะัะบัะพะนัะต `/agora` ะฝะฐ ะดะฒัั ััััะพะนััะฒะฐั
2. ะฃะฑะตะดะธัะตัั ััะพ App ID ะฝะฐัััะพะตะฝ
3. ะะฐะทะฒะฐะฝะธะต ะบะฐะฝะฐะปะฐ ะดะพะปะถะฝะพ ะฑััั ะพะดะธะฝะฐะบะพะฒัะผ
4. ะะฐะถะผะธัะต "ะะฐัะฐัั ะทะฒะพะฝะพะบ" ะฝะฐ ะพะฑะพะธั ััััะพะนััะฒะฐั

**WebRTC ะฒะตััะธั:**
1. ะัะบัะพะนัะต `/` ะฒ ะดะฒัั ะฒะบะปะฐะดะบะฐั/ััััะพะนััะฒะฐั
2. ะัะฟะพะปัะทัะนัะต ะพะดะธะฝ ะบะพะด ะบะพะผะฝะฐัั ะดะปั ะฒะธะดะตะพะทะฒะพะฝะบะฐ
3. ะะตัะฒะพะต ััััะพะนััะฒะพ ัะพะทะดะฐะตั ะบะพะผะฝะฐัั, ะฒัะพัะพะต ะฟะพะดะบะปััะฐะตััั

---

## ๐ ะะพะฝัะธะณััะฐัะธั ะดะปั ัะพััะธะนัะบะธั ััะปะพะฒะธะน

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
```bash
PORT=3001
AGORA_APP_ID=ะฒะฐั_app_id_ะทะดะตัั
AGORA_APP_CERTIFICATE=ะฒะฐั_certificate_ะทะดะตัั  # ะพะฟัะธะพะฝะฐะปัะฝะพ
ICE_URLS=stun:stun.l.google.com:19302,turn:94.198.218.189:3478?transport=udp
TURN_USER=webrtc
TURN_PASS=pRr45XBJgdff9Z2Q4EdTLwOUyqudQjtN
```

### ะะพััะธะนัะบะธะต STUN ัะตัะฒะตัั (ะฒัััะพะตะฝะฝัะต)
- `stun:stun.sipnet.ru:3478` ๐ท๐บ
- `stun:stun.comtube.ru:3478` ๐ท๐บ  
- `stun:stun.voipbuster.com:3478`
- `stun:stun.freecall.com:3478`

---

## ๐ง TURN Server Setup (ะดะปั WebRTC ะฒะตััะธะธ)

### ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ TURN ัะตัะฒะตัะฐ
```bash
# ะกะบะฐัะฐัั ะธ ะทะฐะฟัััะธัั ัะบัะธะฟั ัััะฐะฝะพะฒะบะธ
curl -sSL https://raw.githubusercontent.com/malmik5482/VideoCall/agora-integration/fix-turn-server.sh | bash
```

### ะััััะพะต ะธัะฟัะฐะฒะปะตะฝะธะต TURN
```bash
# ะััััะฐั ะฝะฐัััะพะนะบะฐ ะฑะตะท ะฟะพะปะฝะพะน ะฟะตัะตัััะฐะฝะพะฒะบะธ
curl -sSL https://raw.githubusercontent.com/malmik5482/VideoCall/agora-integration/quick-fix-turn.sh | bash
```

**ะะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ:** [VPS_COMMANDS.md](VPS_COMMANDS.md)

---

## ๐ API Endpoints

### Health Check
```bash
GET /healthz
```

### ICE Configuration (WebRTC)
```bash
GET /config
```

### Agora Token Generation
```bash
POST /agora/token
Content-Type: application/json

{
  "channelName": "test-channel",
  "uid": 0,
  "role": 1
}
```

### Agora Configuration
```bash
GET /agora/config
```

### Analytics
```bash
GET /analytics
GET /history?page=1&limit=50
```

---

## ๐ ะะธะฐะณะฝะพััะธะบะฐ ะธ ะพัะปะฐะดะบะฐ

### WebRTC ะะธะฐะณะฝะพััะธะบะฐ
- **ะัััะพะตะฝะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ TURN:** ะขะตััะธััะตั ะฟะพะดะบะปััะตะฝะธะต ะบ TURN ัะตัะฒะตัั
- **ะัะพะฒะตัะบะฐ ICE ัะตัะฒะตัะพะฒ:** ะะฐะปะธะดะฐัะธั ะฒัะตั STUN/TURN ัะตัะฒะตัะพะฒ
- **ะะพะฝะธัะพัะธะฝะณ ะบะฐัะตััะฒะฐ:** ะะธััะตะนั, ะทะฐะดะตัะถะบะฐ, ะฟะพัะตัะธ ะฟะฐะบะตัะพะฒ

### Agora ะะธะฐะณะฝะพััะธะบะฐ  
- **SDK ะฟัะพะฒะตัะบะฐ:** ะะฐะปะธะดะฐัะธั ะทะฐะณััะทะบะธ Agora SDK
- **ะฃัััะพะนััะฒะฐ:** ะัะพะฒะตัะบะฐ ะบะฐะผะตัั ะธ ะผะธะบัะพัะพะฝะฐ
- **ะกะตัั:** ะะฟัะตะดะตะปะตะฝะธะต ัะธะฟะฐ ัะพะตะดะธะฝะตะฝะธั ะธ ะพะฟะตัะฐัะพัะฐ
- **ะขะพะบะตะฝั:** ะะฒัะพะผะฐัะธัะตัะบะฐั ะณะตะฝะตัะฐัะธั ะธ ะฟัะพะฒะตัะบะฐ

---

## ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต

### Docker
```bash
docker build -t videocall-russia .
docker run -p 3001:3001 -e AGORA_APP_ID=your_app_id videocall-russia
```

### PM2 (Production)
```bash
npm install -g pm2
pm2 start server/index.js --name videocall-agora
pm2 startup
pm2 save
```

---

## ๐ฑ ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะฟะปะฐััะพัะผั

### ะะพะฑะธะปัะฝัะต ะพะฟะตัะฐัะพัั ะะพััะธะธ
- โ **ะะขะก** - ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฐ ัะบะพัะพััั ะธ ะบะฐัะตััะฒะพ
- โ **ะะธะปะฐะนะฝ** - ะะดะฐะฟัะธะฒะฝัะน ะฑะธััะตะนั 
- โ **ะะตะณะฐะคะพะฝ** - ะกัะฐะฑะธะปัะฝะพะต ัะพะตะดะธะฝะตะฝะธะต
- โ **ะขะตะปะต2** - ะญะบะพะฝะพะผะธั ััะฐัะธะบะฐ

### ะัะฐัะทะตัั
- โ **Chrome/Chromium** (ัะตะบะพะผะตะฝะดัะตััั)
- โ **Firefox**
- โ **Safari** (iOS/macOS)
- โ **Edge**
- โ **Mobile browsers** (Android/iOS)

### ะกะตัะธ
- โ **Wi-Fi** - ะะฐะบัะธะผะฐะปัะฝะพะต ะบะฐัะตััะฒะพ 4K
- โ **4G/5G** - ะะดะฐะฟัะธะฒะฝะพะต HD ะบะฐัะตััะฒะพ
- โ **3G** - ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะพะต SD ะบะฐัะตััะฒะพ
- โ **VPN** - ะะฑัะพะด ะฑะปะพะบะธัะพะฒะพะบ ะฟัะพะฒะฐะนะดะตัะพะฒ

---

## ๐ ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะกัะตะบ ัะตัะฝะพะปะพะณะธะน
- **Frontend:** Vanilla JS, WebRTC API, Agora RTC SDK v4.20.0
- **Backend:** Node.js, Express, WebSocket
- **TURN Server:** coturn ะฝะฐ Ubuntu
- **Video Codecs:** VP8, VP9, H.264
- **Audio Codecs:** Opus, PCMU, PCMA

### ะััะธัะตะบัััะฐ
```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Client A      โ    โ  Agora Cloud     โ    โ   Client B      โ
โ   (Mobile)      โโโโโบโ  (Moscow Edge)   โโโโโบโ   (Desktop)     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
        โ                        โ                        โ
        โผ                        โผ                        โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   WebRTC P2P    โโโโโบโ  TURN Server     โโโโโบโ   WebRTC P2P    โ
โ   Fallback      โ    โ 94.198.218.189   โ    โ   Fallback      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

---

## ๐ค Contributing

1. **Fork** the repository
2. **Create** feature branch: `git checkout -b agora-integration`  
3. **Commit** changes: `git commit -am 'Add Agora SDK integration'`
4. **Push** to branch: `git push origin agora-integration`
5. **Create** Pull Request

---

## ๐ License

MIT License - see [LICENSE](LICENSE) file for details.

---

## ๐ฏ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### Agora Edition
- **ะะฐะดะตัะถะบะฐ:** < 200ms ะฒ ะะพััะธะธ
- **ะะฐัะตััะฒะพ:** ะะดะฐะฟัะธะฒะฝะพะต 200-2000 kbps
- **ะกัะฐะฑะธะปัะฝะพััั:** 99.9% uptime
- **ะะพะดะดะตัะถะบะฐ ัะตัะตะน:** 2G/3G/4G/5G

### WebRTC Edition  
- **P2P ะทะฐะดะตัะถะบะฐ:** < 100ms (ะฟััะผะพะต ัะพะตะดะธะฝะตะฝะธะต)
- **TURN ะทะฐะดะตัะถะบะฐ:** < 300ms (ัะตัะตะท relay)
- **ะะธััะตะนั:** ะะพ 3000 kbps ะฝะฐ ัะพัะพัะธั ัะตััั
- **ะะพัััะฐะฝะพะฒะปะตะฝะธะต:** ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟัะธ ัะฐะทััะฒะฐั

---

## ๐ ะะพะดะดะตัะถะบะฐ

- **GitHub Issues:** [ะกะพะทะดะฐัั issue](https://github.com/malmik5482/VideoCall/issues)
- **Email:** malmik5482@gmail.com
- **Telegram:** @malmik5482

**๐ท๐บ ะกะดะตะปะฐะฝะพ ั โค๏ธ ะดะปั ัะพััะธะนัะบะธั ัะฐะทัะฐะฑะพััะธะบะพะฒ ะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน**